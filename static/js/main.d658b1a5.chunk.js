(this["webpackJsonpcspr-app"]=this["webpackJsonpcspr-app"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(2),i=n.n(c),s=n(58),r=n.n(s),o=(n(68),n(60)),l=n(34),u=n(9),d=n(0),f=n(5),p=n(1),m=n(10),h=n.n(m),j=[{name:"\u70b8\u5f39",desc:"\u5623\uff01",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/emojidex/112/bomb_1f4a3.png",effect:function(e,t,n){S(n)}},{name:"\u62a4\u7532",desc:"\u653e\u5165\u6301\u7eed\u533a\uff0c\u53ef\u62b5\u63211\u6b21\u51fa\u5c40",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/twitter/259/shield_1f6e1.png",effect:function(e,t,n){n.entities.push("shield")}},{name:"\u767d\u5ad6",desc:"\u83b7\u5f971\u5206",has_fruit:!0,illust:"https://s3.ax1x.com/2020/12/16/rQ2Eef.jpg",effect:function(e,t,n){n.score+=1}},{name:"\u53cd\u5411\u767d\u5ad6",desc:"\u5931\u53bb1\u5206",illust:"https://s3.ax1x.com/2020/12/27/r4zS8H.jpg",effect:function(e,t,n){n.score-=1}},{name:"\u88f8\u5954",desc:"\u5f03\u6389\u6301\u7eed\u533a\u7684\u6240\u6709\u724c",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/man-running_1f3c3-200d-2642-fe0f.png",effect:function(e,t,n){n.entities=[]}},{name:"\u9001\u6e29\u6696",desc:"\u4e0a\u5bb6\u548c\u4e0b\u5bb6\u5404\u83b7\u5f971\u5206",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/271/pot-of-food_1f372.png",effect:function(e,t,n){var a=e.players.indexOf(n),c=(a+1)%4,i=(a+3)%4;e.players[c].score+=1,e.players[i].score+=1}},{name:"\u897f\u7ea2\u67ff",desc:"\u5c062\u4e2a\u897f\u7ea2\u67ff\u653e\u5165\u6301\u7eed\u533a",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/tomato_1f345.png",effect:function(e,t,n){N(e,t,n,[2,0,0])}},{name:"\u67e0\u6aac",desc:"\u5c062\u4e2a\u67e0\u6aac\u653e\u5165\u6301\u7eed\u533a",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/lemon_1f34b.png",effect:function(e,t,n){N(e,t,n,[0,2,0])}},{name:"\u82f9\u679c",desc:"\u5c062\u4e2a\u82f9\u679c\u653e\u5165\u6301\u7eed\u533a",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/green-apple_1f34f.png",effect:function(e,t,n){N(e,t,n,[0,0,2])}},{name:"\u978b\u5b50",desc:"\u83b7\u5f971\u6b21\u8df3\u8fc7\u673a\u4f1a",has_fruit:!0,illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/twitter/259/running-shoe_1f45f.png",effect:function(e,t,n){n.entities.push("skip")}},{name:"\u5f52\u6863",desc:"\u5f52\u68631\u5f20\u724c",has_fruit:!0,illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/whatsapp/273/floppy-disk_1f4be.png",effect:function(e,t,n){O(n.deck,n.hand)}},{name:"\u52a0\u901f",desc:"\u5f03\u6389\u724c\u5806\u9876\u76841\u5f20\u724c\uff0c\u5e76\u6267\u884c\u51762\u6b21",has_fruit:!0,illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/271/racing-car_1f3ce-fe0f.png",effect:function(e,t,n){var c=O(n.deck,n.discard);void 0!=c&&void 0!=c.effect&&(D(e,t,Object(a.jsxs)("span",{children:["\u6267\u884c\u4e86 ",c.name," \u4e24\u6b21"]})),c.effect(e,t,n),c.effect(e,t,n))}},{name:"\u62c6\u5f39",desc:"\u67e5\u770b\u724c\u5806\u9876\u76841\u5f20\u724c\uff0c\u5982\u679c\u662f\u70b8\u5f39\uff0c\u5c06\u5176\u5f03\u6389\uff0c\u5426\u5219\u653e\u56de\u724c\u5e93\u9876",has_fruit:!0,illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/wrench_1f527.png",effect:function(e,t,n){var c=n.deck[0];if(void 0!=c){if(D(e,t,Object(a.jsxs)("span",{children:["\u4f7f\u7528\u62c6\u5f39\u7ffb\u5f00 ",c.name]})),"\u70b8\u5f39"!=c.name)return;O(n.deck,n.discard)}}},{name:"\u5f15\u7206",desc:"\u5f03\u6389\u724c\u5e93\u9876\u76842\u5f20\u724c\uff0c\u5982\u679c\u5176\u4e2d\u6709\u70b8\u5f39\uff0c\u5219\u76f4\u63a5\u51fa\u5c40\uff0c\u5426\u5219\u83b7\u5f971\u5206",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/271/fire_1f525.png",effect:function(e,t,n){var c=e.deck.slice(0,2);n.deck=n.deck.slice(2),n.discard=[].concat(Object(f.a)(c),Object(f.a)(n.discard)),D(e,t,Object(a.jsxs)("span",{children:["\u56e0\u4e3a\u5f15\u7206\u5f03\u6389\u4e86 ",c.map((function(e){return Object(a.jsxs)("span",{children:[e.name," "]})}))]})),c.map((function(e){return e.name})).includes("\u70b8\u5f39")?S(n):n.score+=1}},{name:"\u673a\u4f1a",desc:"\u5c062\u5f20\u5c71\u724c\u653e\u5230\u724c\u5e93\u9876",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/271/game-die_1f3b2.png",effect:function(e,t,n){n.deck=[].concat(Object(f.a)(e.deck.slice(0,2)),Object(f.a)(n.deck)),e.deck=e.deck.slice(2)}}],b=["https://s1.ax1x.com/2020/11/08/BI5SKA.png","https://s1.ax1x.com/2020/11/08/BI5pDI.png","https://s1.ax1x.com/2020/11/08/BI4xvd.png","https://s1.ax1x.com/2020/11/08/BI4j8e.png","https://s1.ax1x.com/2020/11/08/BI4vgH.png","https://s1.ax1x.com/2020/11/08/BI59bt.png","https://s1.ax1x.com/2020/11/08/BI5PVP.png","https://s1.ax1x.com/2020/11/08/BI5iUf.png","https://s1.ax1x.com/2020/11/08/BI5F58.png","https://s1.ax1x.com/2020/11/08/BI5APS.png"],v="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/beer-mug_1f37a.png";function g(e,t){var n=e.entities.filter((function(e){return"object"==typeof e&&e.fruit==t})).length;if(n>=3)e.score+=6;else if(2==n)e.score+=3;else{if(1!=n)return;e.score+=1}}var x=[{name:"\u76ee\u6807: \u51fb\u6740\u4e0a\u5bb6",desc:"\u5982\u679c\u4e0a\u5bb6\u5df2\u7ecf\u51fa\u5c40\uff0c\u5219\u83b7\u5f973\u5206",stackable:!0,effect:function(e,t,n){var a=(e.players.indexOf(n)+3)%4;1==e.players[a].out&&(n.score+=3)}},{name:"\u76ee\u6807: \u51fb\u6740\u4e0b\u5bb6",desc:"\u5982\u679c\u4e0b\u5bb6\u5df2\u7ecf\u51fa\u5c40\uff0c\u5219\u83b7\u5f973\u5206",stackable:!0,effect:function(e,t,n){var a=(e.players.indexOf(n)+1)%4;1==e.players[a].out&&(n.score+=3)}},{name:"\u76ee\u6807: \u4fdd\u62a4\u4e0a\u5bb6",desc:"\u5982\u679c\u4e0a\u5bb6\u4f9d\u7136\u5b58\u6d3b\uff0c\u5219\u83b7\u5f971\u5206\uff0c\u5426\u5219\u5931\u53bb1\u5206",effect:function(e,t,n){var a=(e.players.indexOf(n)+3)%4;1!=e.players[a].out?n.score+=1:n.score-=1}},{name:"\u76ee\u6807: \u4fdd\u62a4\u4e0b\u5bb6",desc:"\u5982\u679c\u4e0b\u5bb6\u4f9d\u7136\u5b58\u6d3b\uff0c\u5219\u83b7\u5f971\u5206\uff0c\u5426\u5219\u5931\u53bb1\u5206",effect:function(e,t,n){var a=(e.players.indexOf(n)+1)%4;1!=e.players[a].out?n.score+=1:n.score-=1}},{name:"\u76ee\u6807: \u897f\u7ea2\u67ff",desc:"\u5982\u679c\u4f60\u62e5\u67091/2/3\u4e2a\u897f\u7ea2\u67ff\uff0c\u5219\u83b7\u5f971/3/6\u5206",effect:function(e,t,n){g(n,0)}},{name:"\u76ee\u6807: \u67e0\u6aac",desc:"\u5982\u679c\u4f60\u62e5\u67091/2/3\u4e2a\u67e0\u6aac\uff0c\u5219\u83b7\u5f971/3/6\u5206",effect:function(e,t,n){g(n,1)}},{name:"\u76ee\u6807: \u9752\u82f9\u679c",desc:"\u5982\u679c\u4f60\u62e5\u67091/2/3\u4e2a\u82f9\u679c\uff0c\u5219\u83b7\u5f971/3/6\u5206",effect:function(e,t,n){g(n,2)}},{name:"\u76ee\u6807: \u5f52\u6863",desc:"\u5982\u679c\u4f60\u7684\u5b58\u6863\u4e2d\u67091/2\u5f20\u724c\uff0c\u5219\u83b7\u5f972/5\u5206",effect:function(e,t,n){var a=n.hand.length;if(1==a)n.score+=2;else{if(!(a>=2))return;n.score+=5}}},{name:"\u76ee\u6807: \u73a9\u4e2a\u523a\u6fc0\u7684",desc:'\u5982\u679c\u4f60\u7684\u5f03\u724c\u5806\u4e2d\u6709"\u5f15\u7206"\uff0c\u5219\u83b7\u5f972\u5206',effect:function(e,t,n){void 0!=n.discard.find((function(e){return"\u5f15\u7206"==e.name}))&&(n.score+=2)}},{name:"\u76ee\u6807: \u673a\u4f1a",desc:'\u5982\u679c\u4f60\u7684\u5f03\u724c\u5806\u4e2d\u6709"\u673a\u4f1a"\uff0c\u5219\u83b7\u5f972\u5206',effect:function(e,t,n){void 0!=n.discard.find((function(e){return"\u673a\u4f1a"==e.name}))&&(n.score+=2)}}].map((function(e){return Object(d.a)(Object(d.a)({},e),{},{is_goal:!0,illust:v})})),_=function(e,t){return function(n,a,c,i){if(i&&!i.is_achieved){var s=c.entities.reduce((function(e,t){if("object"==typeof t){var n=Object(f.a)(e);return n[t.fruit]+=1,n}return e}),[0,0,0]),r=s.map((function(t,n){return t-e[n]>=0})),o=!r.includes(!1);console.log("D:".concat(r,", F:").concat(s,", A:").concat(o)),o&&(c.score+=t,i.is_achieved=!0,n.gamelogs.unshift("\u548c\u724c!"))}}},y=[{name:"\u516c\u5171\u76ee\u6807(3\u5206)",desc:"AAA",effect:_([3,0,0],3)},{name:"\u516c\u5171\u76ee\u6807(3\u5206)",desc:"BBB",effect:_([0,3,0],3)},{name:"\u516c\u5171\u76ee\u6807(3\u5206)",desc:"CCC",effect:_([0,0,3],3)},{name:"\u516c\u5171\u76ee\u6807(4\u5206)",desc:"ABC",effect:_([1,1,1],4)},{name:"\u516c\u5171\u76ee\u6807(4\u5206)",desc:"AABB",effect:_([2,2,0],4)},{name:"\u516c\u5171\u76ee\u6807(4\u5206)",desc:"AACC",effect:_([2,0,2],4)},{name:"\u516c\u5171\u76ee\u6807(4\u5206)",desc:"BBCC",effect:_([0,2,2],4)}].map((function(e){return Object(d.a)(Object(d.a)({},e),{},{is_goal:!0,is_public:!0,illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/green-salad_1f957.png"})}));function O(e,t){var n=e.splice(0,1)[0];return n?(t.unshift(n),n):void 0}function k(){return{score:0,hand:[],deck:[],discard:[],goals:[],entities:["skip"],previous_action:void 0,finished:!1,out:!1}}var w=function(e,t){e.phase="place",e.round+=1,e.deck=function(e){var t,n,a=[].concat(Object(f.a)(h.a.times(6,(function(){return"\u70b8\u5f39"}))),Object(f.a)(h.a.times(4,(function(){return"\u62a4\u7532"}))),Object(f.a)(h.a.times(3,(function(){return"\u767d\u5ad6"}))),Object(f.a)(h.a.times(2,(function(){return"\u53cd\u5411\u767d\u5ad6"}))),Object(f.a)(h.a.times(3,(function(){return"\u62c6\u5f39"}))),Object(f.a)(h.a.times(2,(function(){return"\u5f15\u7206"}))),Object(f.a)(h.a.times(1,(function(){return"\u52a0\u901f"}))),Object(f.a)(h.a.times(3,(function(){return"\u5f52\u6863"}))),Object(f.a)(h.a.times(2,(function(){return"\u978b\u5b50"}))),Object(f.a)(h.a.times(1,(function(){return"\u88f8\u5954"}))),Object(f.a)(h.a.times(2,(function(){return"\u9001\u6e29\u6696"}))),Object(f.a)(h.a.times(1,(function(){return"\u897f\u7ea2\u67ff"}))),Object(f.a)(h.a.times(1,(function(){return"\u67e0\u6aac"}))),Object(f.a)(h.a.times(1,(function(){return"\u82f9\u679c"}))),Object(f.a)(h.a.times(2,(function(){return"\u673a\u4f1a"})))).map((function(e){return j.find((function(t){return t.name==e}))})).filter((function(e){return void 0!=e})).map((function(e){return Object(d.a)({},e)})),c=Object(u.a)(a);try{for(c.s();!(n=c.n()).done;){var i=n.value;i.has_fruit&&(i.fruit=e.random.Die(3)-1)}}catch(s){c.e(s)}finally{c.f()}return(null===(t=e.random)||void 0===t?void 0:t.Shuffle(a))||a}(t),e.init_player=(e.init_player+1)%4;var n,a=Object(u.a)(e.players);try{for(a.s();!(n=a.n()).done;){var c=n.value;c.deck=[],c.hand=[],c.discard=[],c.entities=["skip"],c.out=!1,c.finished=!1,c.previous_action=void 0}}catch(i){a.e(i)}finally{a.f()}!function(e,t){for(var n=t.random.Shuffle([].concat(Object(f.a)(x),Object(f.a)(x.filter((function(e){return e.stackable}))))),a=0;a<e.players.length;a++)e.players[a].goals=n.slice(2*a,2*a+2);e.public_goals=t.random.Shuffle(y.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{is_achieved:!1})}))).slice(0,1)}(e,t),function(e,t){var n,a=Object(u.a)(e.players);try{for(a.s();!(n=a.n()).done;)n.value.hand=e.deck.slice(0,7),e.deck=e.deck.slice(7)}catch(i){a.e(i)}finally{a.f()}}(e)};function N(e,t,n,a){for(var c=0;c<3;c++)for(var i=0;i<a[c];i++)n.entities.push({fruit:c});var s,r=Object(u.a)(e.public_goals);try{for(r.s();!(s=r.n()).done;){var o=s.value;o.effect(e,t,n,o)}}catch(l){r.e(l)}finally{r.f()}}function C(e,t){var n=(t+1)%e.length;return e[n].finished?C(e,n):n}var G=function(e,t,n,a,c){var i=e.players[n],s=i.hand[a];i.hand=i.hand.filter((function(e){return e!=s})),e.players[(n+c)%e.players.length].deck.unshift(s),i.previous_action=c},B=function(e,t){var n=e.players.map((function(e){return e.hand})),a=n.length;if(0==n[0].length)console.log("Time to enter the action phase"),function(e,t){e.phase="action";var n,a=Object(u.a)(e.players);try{for(a.s();!(n=a.n()).done;){var c,i=n.value;i.deck=(null===(c=t.random)||void 0===c?void 0:c.Shuffle(i.deck))||i.deck,i.deck=[].concat(Object(f.a)(i.deck),Object(f.a)(i.goals))}}catch(s){a.e(s)}finally{a.f()}e.next_action="flip",e.active_player_idx=e.init_player}(e,t);else{n=[n[a-1]].concat(Object(f.a)(n.slice(0,a-1)));for(var c=0;c<a;c++)e.players[c].hand=n[c]}var i,s=Object(u.a)(e.players);try{for(s.s();!(i=s.n()).done;){i.value.placed=!1}}catch(r){s.e(r)}finally{s.f()}};function I(e){var t=e.deck[0];void 0!=t&&(e.deck=e.deck.slice(1),e.discard.unshift(t))}function S(e){var t=e.entities.map((function(e,t){return"shield"==e?t:void 0})).filter((function(e){return void 0!=e}))[0];console.log("Find shield:",t),void 0!=t?e.entities=e.entities.filter((function(e,n){return n!=t})):(console.log("Player ".concat(e.score,"\u5206 is out")),e.out=!0)}var z=function(e,t,n){if("execute"==e.next_action||n)if(function(e){return void 0==e.players.find((function(e){return!e.finished}))}(e))!function(e,t){w(e,t)}(e,t);else{var a=C(e.players,e.active_player_idx);e.active_player_idx=a,e.next_action="flip"}else e.next_action="execute"},A=function(e,t,n,a){if("flip"!=e.next_action||e.active_player_idx!=n)return p.t;var c=e.players[e.active_player_idx],i=!1;if("skip"==a){var s=c.entities.find((function(e){return"skip"==e}));if(void 0==s)return p.t;var r=c.entities.indexOf(s);I(c),c.entities.splice(r,1),i=!0,D(e,t,"\u9009\u62e9\u8df3\u8fc7")}else if("object"==typeof a&&"archive_idx"in a){var o=c.hand[a.archive_idx];if(void 0==o)return p.t;c.hand=c.hand.filter((function(e){return e!=o})),c.discard.unshift(o)}else I(c),console.log("\u7ffb\u5f00\u724c",c.discard[0].name),D(e,t,"\u7ffb\u5f00 ".concat(c.discard[0].name));z(e,t,i)},P=function(e,t,n,a){if(n!=e.active_player_idx)return p.t;var c=e.players[e.active_player_idx],i=c.discard[0];if(console.log("".concat(n," is executing")),"fruit"==a){if(console.log("Gonna add fruit"),void 0==i.fruit)return p.t;var s=[0,0,0];s[i.fruit]=1,N(e,t,c,s),D(e,t,"\u5c06 ".concat(i.name," \u4f5c\u4e3a\u6c34\u679c"))}else console.log("Just execute ".concat(i.name)),console.log(Object(d.a)({},i)),i.effect&&i.effect(e,t,c,i),D(e,t,"\u6267\u884c ".concat(i.name));c.finished=c.out||0==c.deck.length,z(e,t)},D=function(e,t,n){e.gamelogs.unshift(n)},F={setup:function(e){var t,n={deck:[],players:h.a.times(4,k),public_goals:[],actions:[],round:-1,init_player:((null===(t=e.random)||void 0===t?void 0:t.Die(4))||1)-1,active_player_idx:0,next_action:"place",phase:"place",host:0,ai_players:[0,1,2,3].slice(e.numPlayers),gamelogs:[]};return function(e,t){for(var n=e.players.length,a=t.random.Shuffle(b).slice(0,n),c=0;c<n;c++)e.players[c].illust=a[c]}(n,e),w(n,e),console.log("How many AI: ".concat(e.numPlayers," ").concat(n.ai_players)),n},moves:{add_action:function(e,t,n){e.actions.push(n),e.players[n.from_idx].placed=!0,n.from_idx==e.host&&function(e,t){var n,a=Object(u.a)(e.ai_players);try{for(a.s();!(n=a.n()).done;){var c=n.value,i=t.random.Die(e.players[c].hand.length)-1,s=t.random.Die(e.players.length)-1;e.actions.push({from_idx:c,card_idx:i,direction:s})}}catch(r){a.e(r)}finally{a.f()}}(e,t),console.log("Actions length: ".concat(e.actions.length)),e.actions.length==e.players.length&&function(e,t){var n,a=Object(u.a)(e.actions);try{for(a.s();!(n=a.n()).done;){var c=n.value;G(e,0,c.from_idx,c.card_idx,c.direction)}}catch(i){a.e(i)}finally{a.f()}e.actions=[],B(e,t)}(e,t)},flip:A,execute:P,ai_act:function(e,t,n){if(!e.ai_players.includes(e.active_player_idx)||e.host!=n)return p.t;if("flip"==e.next_action){A(e,t,e.active_player_idx,"flip")}else{if("execute"!=e.next_action)return p.t;P(e,t,e.active_player_idx,"execute")}},log_msg:D},minPlayers:1,maxPlayers:4,turn:{activePlayers:p.H.ALL}},E=n(16),T=n(25),H=(n(70),{height:"auto",width:"1.0em"}),L=["https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/tomato_1f345.png","https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/lemon_1f34b.png","https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/green-apple_1f34f.png"].map((function(e){return Object(a.jsx)("img",{src:e,style:H})})),J=Object(a.jsx)("img",{src:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/twitter/259/shield_1f6e1.png",style:H}),M=Object(a.jsx)("img",{src:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/twitter/259/running-shoe_1f45f.png",style:H});function K(){return{board:"GoalBoard",player_idx:0,log:""}}function Q(e,t){var n=e.players[t.player_idx];if("place"==e.phase)return n.placed||void 0==t.hand_selected?[]:function(e,t){var n=["\u81ea\u5df1","\u4e0b\u5bb6","\u4e0a\u5bb6","\u5bf9\u5bb6"];return[0,1,3,2].map((function(a,c){return{name:n[c],action:"add_place_action",args:[e,t,a]}}))}(t.player_idx,t.hand_selected);if(e.active_player_idx==t.player_idx){if("flip"==e.next_action){var a=[{name:"\u7ffb\u5f00",action:"flip",args:[t.player_idx,"flip"]}];return n.entities.includes("skip")&&a.push({name:"\u8df3\u8fc7",action:"flip",args:[t.player_idx,"skip"]}),n.hand.length>0&&void 0!=t.hand_selected&&a.unshift({name:"\u6253\u51fa\u5b58\u6863",action:"flip",args:[t.player_idx,{archive_idx:t.hand_selected}]}),a}var c=[{name:"\u6267\u884c",action:"execute",args:[t.player_idx,"execute"]}];return void 0!=n.discard[0].fruit&&c.push({name:"\u4f5c\u4e3a\u6c34\u679c",action:"execute",args:[t.player_idx,"fruit"]}),c}return t.player_idx==e.host&&e.ai_players.includes(e.active_player_idx)?[{name:"\u884c\u52a8",action:"ai_act",args:[t.player_idx]}]:[]}var R=function(e,t){e.log=t},U={select_hand:function(e,t,n){!function(e,t){e.hand_selected==t?e.hand_selected=void 0:e.hand_selected=t}(e,t);var c=n[t];R(e,Object(a.jsxs)("span",{children:[c.name,": ",c.desc]}))},clear_state:function(e){e.hand_selected=void 0},change_board:function(e,t){e.board=t},log_msg:R};function V(e,t){var n={};for(var a in t)n[a]=e(t[a],a);return n}var q={add_place_action:function(e,t,n,a,c){e.add_action({from_idx:n,card_idx:a,direction:c}),t.clear_state()},ai_act:function(e,t,n){e.ai_act(n)},flip:function(e,t,n,a){e.flip(n,a)},execute:function(e,t,n,a){e.execute(n,a)}};function W(e){return Object(a.jsxs)("div",{className:"top-panel",children:[Object(a.jsx)("button",{className:"check-goal-button",onClick:e.checkGoal,children:"\u67e5\u770b\u76ee\u6807"}),e.gameCount]})}function X(e){return Object(a.jsx)("div",{className:"deck-area",children:Object(a.jsx)("div",{className:"card-num",children:e.cardNum})})}function Y(e){return Object(a.jsx)("div",{className:"play-area",children:Object(a.jsx)(se,Object(d.a)({},e.playedCard))})}function Z(e){return Object(a.jsxs)("div",{className:"card-areas",children:[Object(a.jsx)(X,{cardNum:e.cardNum}),Object(a.jsx)(Y,{playedCard:e.playedCard})]})}function $(e){return Object(a.jsx)("div",{className:"avatar",style:{border:e.selected?"3px solid #61dafb":e.out?"1px solid #f5222d":void 0},children:Object(a.jsx)("img",{src:e.illust,className:"avatar-img"})})}function ee(e){return Object(a.jsx)("div",{className:"info-line",style:{color:"\u6263\u7ed9\u4f60"==e.content?"#61dafb":void 0},children:e.content})}function te(e){return Object(a.jsxs)("div",{className:"player-info",children:[Object(a.jsx)($,{illust:e.illust,selected:e.selected,out:e.out}),Object(a.jsx)(ee,{content:"".concat(e.name,"(").concat(e.score,"\u5206)")}),Object(a.jsx)(ee,{content:e.info})]})}function ne(e){return Object(a.jsxs)("div",{className:"player",children:[Object(a.jsx)(Z,{cardNum:e.playerInfo.deck.length,playedCard:e.playerInfo.discard[0]}),Object(a.jsx)(te,Object(d.a)({},e.playerInfo))]})}function ae(e){return Object(a.jsx)("div",{className:"central",children:e.players.map((function(e){return Object(a.jsx)(ne,{playerInfo:e})}))})}function ce(e){return Object(c.useEffect)((function(){return console.log(e.log)}),[e.log]),Object(a.jsx)("div",{className:"info-panel",children:e.log})}function ie(e){var t=e.operations[0],n=t&&"\u884c\u52a8"==t.name;Object(c.useEffect)((function(){if(1==n){var t=e.operations[0];console.log("Ready to auto_move ".concat(e.G.active_player_idx," ").concat(e.G.next_action)),setTimeout((function(){var n;(n=e.combined)[t.action].apply(n,Object(f.a)(t.args||[]))}),600)}}),[e.G.active_player_idx,e.G.next_action]);var i=n?[]:e.operations;return Object(a.jsx)("div",{className:"controller",children:i.map((function(t){return Object(a.jsx)("button",{className:"controller-button",onClick:function(){var n;return(n=e.combined)[t.action].apply(n,Object(f.a)(t.args||[]))},children:t.name})}))})}function se(e){return Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"illust-container",children:Object(a.jsx)("img",{className:"illust",src:e.illust})}),Object(a.jsx)("div",{className:"card-fruit",style:{display:void 0!=e.fruit?void 0:"none"},children:void 0!=e.fruit?L[e.fruit]:""})]})}function re(e){return Object(a.jsx)("div",{className:"card-container",style:{border:1==e.card.selected?"3px solid #61dafb":void 0},onClick:e.handleClick,children:Object(a.jsx)(se,Object(d.a)({},e.card))})}function oe(e){return Object(a.jsx)("div",{className:"card-row",children:e.cards.map((function(t,n){return Object(a.jsx)(re,{card:t,handleClick:e.handleCardClick(n)})}))})}function le(e,t,n){return"place"==t.phase?void 0!=e.previous_action?(t.players.indexOf(e)+e.previous_action)%4==n.player_idx&&0!=e.previous_action?"\u6263\u7ed9\u4f60":["\u6263\u7ed9\u81ea\u5df1","\u6263\u7ed9\u4e0b\u5bb6","\u6263\u7ed9\u5bf9\u5bb6","\u6263\u7ed9\u4e0a\u5bb6"][e.previous_action]:"\u51c6\u5907\u6263\u724c":e.finished?e.out?"\u5df2\u51fa\u5c40":"\u5df2\u5b8c\u6210":e.entities.map((function(e){return function(e){return"object"==typeof e?L[e.fruit]:"shield"==e?J:M}(e)}))}function ue(e,t){var n=e-t;return n<0?4+n:n}function de(e){return Object(a.jsxs)("div",{className:"board",children:[Object(a.jsx)(ae,{players:(n=e.G.players.map((function(t,n){return function(e,t,n,a){return Object(d.a)(Object(d.a)({},e),{},{name:["\u73a9\u5bb6","\u4e0b\u5bb6","\u5bf9\u5bb6","\u4e0a\u5bb6"][ue(t,a.player_idx)],info:le(e,n,a),selected:"action"==n.phase&&t==n.active_player_idx})}(t,n,e.G,e.S)})),c=[(e.S.player_idx+2)%4,(e.S.player_idx+3)%4,(e.S.player_idx+1)%4,e.S.player_idx],c.map((function(e){return n[e]})))}),Object(a.jsx)(ce,{log:"place"==e.G.phase?e.S.log:e.G.gamelogs[0]}),Object(a.jsx)(ie,{operations:Q(e.G,e.S),combined:e.combined,G:e.G}),Object(a.jsx)(oe,{cards:e.G.players[e.S.player_idx].hand.map((t=e.S,function(e,n){return Object(d.a)(Object(d.a)({},e),{},{selected:t.hand_selected==n})})),handleCardClick:function(t){return function(){return e.actions.select_hand(t,e.G.players[e.S.player_idx].hand)}}}),Object(a.jsx)(W,{gameCount:"".concat("\u6771\u5357\u897f"[Math.floor(e.G.round/4)]).concat(e.G.round%4+1,"\u5c40"),checkGoal:function(){return e.actions.change_board("GoalBoard")}})]});var t,n,c}function fe(e){var t=1==e.goal.is_public?"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/green-salad_1f957.png":v;return Object(a.jsxs)("div",{className:"goal",children:[Object(a.jsx)("div",{className:"goal-illust-container",children:Object(a.jsx)("img",{className:"goal-illust",src:t})}),Object(a.jsx)("div",{className:"goal-desc-container",children:Object(a.jsxs)("div",{className:"goal-desc",children:[e.goal.name,Object(a.jsx)("br",{}),e.goal.desc]})})]})}function pe(e){var t={A:L[0],B:L[1],C:L[2]};return e.split("").map((function(e){return t[e]}))}var me={GameBoard:de,GoalBoard:function(e){return Object(a.jsxs)("div",{className:"board",children:[Object(a.jsxs)("div",{className:"goals-container",children:[e.G.public_goals.filter((function(e){return!e.is_achieved})).map((function(e){return Object(a.jsx)(fe,{goal:{name:e.name,desc:pe(e.desc),is_public:e.is_public}})})),e.G.players[e.S.player_idx].goals.map((function(e){return Object(a.jsx)(fe,{goal:{name:e.name,desc:e.desc,is_public:e.is_public}})}))]}),Object(a.jsx)("button",{className:"gb-back-button",onClick:function(){return e.actions.change_board("GameBoard")},children:"\u8fd4\u56de"})]})}};var he=Object(o.a)({game:F,board:function(e){var t=Object(c.useState)(K),n=Object(E.a)(t,2),a=n[0],i=n[1],s=V((function(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return i(Object(T.b)((function(t){return e.apply(void 0,[t].concat(n))})))}}),U),r=V((function(t){return function(){for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t.apply(void 0,[e.moves,s].concat(a))}}),q),o=e.G,l=e.ctx,u=e.moves,f={G:o,ctx:l,moves:u,S:a,actions:s,combined:r};return Object(c.useEffect)((function(){"place"==o.phase&&s.change_board("GoalBoard")}),[o.phase]),Object(c.useEffect)((function(){i(Object(d.a)(Object(d.a)({},a),{},{player_idx:parseInt(e.playerID||"0")})),console.log(Object(d.a)({},e)),console.log("The player ID is: ".concat(e.playerID))}),[]),(me[a.board]||de)(f)},debug:!1,multiplayer:Object(l.a)(),numPlayers:1}),je=function(){return Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)(he,{playerID:"0"})})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,103)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))};r.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(je,{})}),document.getElementById("root")),be()},68:function(e,t,n){},70:function(e,t,n){},97:function(e,t){}},[[101,1,2]]]);
//# sourceMappingURL=main.d658b1a5.chunk.js.map