(this["webpackJsonpcspr-app"]=this["webpackJsonpcspr-app"]||[]).push([[0],{104:function(t,e){},108:function(t,e,i){"use strict";i.r(e);var n=i(1),a=i(3),s=i.n(a),c=i(63),r=i.n(c),p=(i(72),i(13)),o=i(0),E=i(48),l=i(34),u=i(9),d=i(5),f=i(2),m=i(10),g=i.n(m),B=[{name:"\u70b8\u5f39",desc:"\u5623\uff01",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/emojidex/112/bomb_1f4a3.png",effect:function(t,e,i){N(i)}},{name:"\u62a4\u7532",desc:"\u653e\u5165\u6301\u7eed\u533a\uff0c\u53ef\u62b5\u63211\u6b21\u51fa\u5c40",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/twitter/259/shield_1f6e1.png",effect:function(t,e,i){i.entities.push("shield")}},{name:"\u767d\u5ad6",desc:"\u83b7\u5f971\u5206",has_fruit:!0,illust:"https://s3.ax1x.com/2020/12/16/rQ2Eef.jpg",effect:function(t,e,i){i.score+=1}},{name:"\u53cd\u5411\u767d\u5ad6",desc:"\u5931\u53bb1\u5206",illust:"https://s3.ax1x.com/2020/12/27/r4zS8H.jpg",effect:function(t,e,i){i.score-=1}},{name:"\u88f8\u5954",desc:"\u5f03\u6389\u6301\u7eed\u533a\u7684\u6240\u6709\u724c",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/man-running_1f3c3-200d-2642-fe0f.png",effect:function(t,e,i){i.entities=[]}},{name:"\u9001\u6e29\u6696",desc:"\u4e0a\u5bb6\u548c\u4e0b\u5bb6\u5404\u83b7\u5f971\u5206",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/271/pot-of-food_1f372.png",effect:function(t,e,i){var n=t.players.indexOf(i),a=(n+1)%4,s=(n+3)%4;t.players[a].score+=1,t.players[s].score+=1}},{name:"\u897f\u7ea2\u67ff",desc:"\u5c062\u4e2a\u897f\u7ea2\u67ff\u653e\u5165\u6301\u7eed\u533a",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/tomato_1f345.png",effect:function(t,e,i){y(t,e,i,[2,0,0])}},{name:"\u67e0\u6aac",desc:"\u5c062\u4e2a\u67e0\u6aac\u653e\u5165\u6301\u7eed\u533a",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/lemon_1f34b.png",effect:function(t,e,i){y(t,e,i,[0,2,0])}},{name:"\u82f9\u679c",desc:"\u5c062\u4e2a\u82f9\u679c\u653e\u5165\u6301\u7eed\u533a",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/green-apple_1f34f.png",effect:function(t,e,i){y(t,e,i,[0,0,2])}},{name:"\u978b\u5b50",desc:"\u83b7\u5f971\u6b21\u8df3\u8fc7\u673a\u4f1a",has_fruit:!0,illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/twitter/259/running-shoe_1f45f.png",effect:function(t,e,i){i.entities.push("skip")}},{name:"\u5f52\u6863",desc:"\u5f52\u68631\u5f20\u724c",has_fruit:!0,illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/whatsapp/273/floppy-disk_1f4be.png",effect:function(t,e,i){F(i.deck,i.hand)}},{name:"\u52a0\u901f",desc:"\u5f03\u6389\u724c\u5806\u9876\u76841\u5f20\u724c\uff0c\u5e76\u6267\u884c\u51762\u6b21",has_fruit:!0,illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/271/racing-car_1f3ce-fe0f.png",effect:function(t,e,i){var a=F(i.deck,i.discard);void 0!=a&&void 0!=a.effect&&(z(t,e,Object(n.jsxs)("span",{children:["\u6267\u884c\u4e86 ",a.name," \u4e24\u6b21"]})),a.effect(t,e,i),a.effect(t,e,i))}},{name:"\u62c6\u5f39",desc:"\u67e5\u770b\u724c\u5806\u9876\u76841\u5f20\u724c\uff0c\u5982\u679c\u662f\u70b8\u5f39\uff0c\u5c06\u5176\u5f03\u6389\uff0c\u5426\u5219\u653e\u56de\u724c\u5e93\u9876",has_fruit:!0,illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/wrench_1f527.png",effect:function(t,e,i){var a=i.deck[0];if(void 0!=a){if(z(t,e,Object(n.jsxs)("span",{children:["\u4f7f\u7528\u62c6\u5f39\u7ffb\u5f00 ",a.name]})),"\u70b8\u5f39"!=a.name)return;F(i.deck,i.discard)}}},{name:"\u5f15\u7206",desc:"\u5f03\u6389\u724c\u5e93\u9876\u76842\u5f20\u724c\uff0c\u5982\u679c\u5176\u4e2d\u6709\u70b8\u5f39\uff0c\u5219\u76f4\u63a5\u51fa\u5c40\uff0c\u5426\u5219\u83b7\u5f971\u5206",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/271/fire_1f525.png",effect:function(t,e,i){var a=t.deck.slice(0,2);i.deck=i.deck.slice(2),i.discard=[].concat(Object(d.a)(a),Object(d.a)(i.discard)),z(t,e,Object(n.jsxs)("span",{children:["\u56e0\u4e3a\u5f15\u7206\u5f03\u6389\u4e86 ",a.map((function(t){return Object(n.jsxs)("span",{children:[t.name," "]})}))]})),a.map((function(t){return t.name})).includes("\u70b8\u5f39")?N(i):i.score+=1}},{name:"\u673a\u4f1a",desc:"\u5c062\u5f20\u5c71\u724c\u653e\u5230\u724c\u5e93\u9876",illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/apple/271/game-die_1f3b2.png",effect:function(t,e,i){i.deck=[].concat(Object(d.a)(t.deck.slice(0,2)),Object(d.a)(i.deck)),t.deck=t.deck.slice(2)}}],h=["https://s1.ax1x.com/2020/11/08/BI5SKA.png","https://s1.ax1x.com/2020/11/08/BI5pDI.png","https://s1.ax1x.com/2020/11/08/BI4xvd.png","https://s1.ax1x.com/2020/11/08/BI4j8e.png","https://s1.ax1x.com/2020/11/08/BI4vgH.png","https://s1.ax1x.com/2020/11/08/BI59bt.png","https://s1.ax1x.com/2020/11/08/BI5PVP.png","https://s1.ax1x.com/2020/11/08/BI5iUf.png","https://s1.ax1x.com/2020/11/08/BI5F58.png","https://s1.ax1x.com/2020/11/08/BI5APS.png"],A="https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/beer-mug_1f37a.png";function _(t,e){var i=t.entities.filter((function(t){return"object"==typeof t&&t.fruit==e})).length;if(i>=4)t.score+=7;else if(3==i)t.score+=4;else{if(2!=i)return;t.score+=2}}var b=[{name:"\u76ee\u6807: \u51fb\u6740\u4e0a\u5bb6",desc:"\u5982\u679c\u4e0a\u5bb6\u5df2\u7ecf\u51fa\u5c40\uff0c\u5219\u83b7\u5f973\u5206",stackable:!0,effect:function(t,e,i){var n=(t.players.indexOf(i)+3)%4;1==t.players[n].out&&(i.score+=3)}},{name:"\u76ee\u6807: \u51fb\u6740\u4e0b\u5bb6",desc:"\u5982\u679c\u4e0b\u5bb6\u5df2\u7ecf\u51fa\u5c40\uff0c\u5219\u83b7\u5f973\u5206",stackable:!0,effect:function(t,e,i){var n=(t.players.indexOf(i)+1)%4;1==t.players[n].out&&(i.score+=3)}},{name:"\u76ee\u6807: \u4fdd\u62a4\u4e0a\u5bb6",desc:"\u5982\u679c\u4e0a\u5bb6\u4f9d\u7136\u5b58\u6d3b\uff0c\u5219\u83b7\u5f971\u5206\uff0c\u5426\u5219\u5931\u53bb1\u5206",effect:function(t,e,i){var n=(t.players.indexOf(i)+3)%4;1!=t.players[n].out?i.score+=1:i.score-=1}},{name:"\u76ee\u6807: \u4fdd\u62a4\u4e0b\u5bb6",desc:"\u5982\u679c\u4e0b\u5bb6\u4f9d\u7136\u5b58\u6d3b\uff0c\u5219\u83b7\u5f971\u5206\uff0c\u5426\u5219\u5931\u53bb1\u5206",effect:function(t,e,i){var n=(t.players.indexOf(i)+1)%4;1!=t.players[n].out?i.score+=1:i.score-=1}},{name:"\u76ee\u6807: \u897f\u7ea2\u67ff",desc:"\u5982\u679c\u4f60\u62e5\u67092/3/4\u4e2a\u897f\u7ea2\u67ff\uff0c\u5219\u83b7\u5f972/4/7\u5206",effect:function(t,e,i){_(i,0)}},{name:"\u76ee\u6807: \u67e0\u6aac",desc:"\u5982\u679c\u4f60\u62e5\u67092/3/4\u4e2a\u67e0\u6aac\uff0c\u5219\u83b7\u5f972/4/7\u5206",effect:function(t,e,i){_(i,1)}},{name:"\u76ee\u6807: \u9752\u82f9\u679c",desc:"\u5982\u679c\u4f60\u62e5\u67092/3/4\u4e2a\u82f9\u679c\uff0c\u5219\u83b7\u5f972/4/7\u5206",effect:function(t,e,i){_(i,2)}},{name:"\u76ee\u6807: \u5f52\u6863",desc:"\u5982\u679c\u4f60\u7684\u5b58\u6863\u4e2d\u67091/2\u5f20\u724c\uff0c\u5219\u83b7\u5f972/5\u5206",effect:function(t,e,i){var n=i.hand.length;if(1==n)i.score+=2;else{if(!(n>=2))return;i.score+=5}}},{name:"\u76ee\u6807: \u73a9\u4e2a\u523a\u6fc0\u7684",desc:'\u5982\u679c\u4f60\u7684\u5f03\u724c\u5806\u4e2d\u6709"\u5f15\u7206"\uff0c\u5219\u83b7\u5f972\u5206',effect:function(t,e,i){void 0!=i.discard.find((function(t){return"\u5f15\u7206"==t.name}))&&(i.score+=2)}},{name:"\u76ee\u6807: \u673a\u4f1a",desc:'\u5982\u679c\u4f60\u7684\u5f03\u724c\u5806\u4e2d\u6709"\u673a\u4f1a"\uff0c\u5219\u83b7\u5f972\u5206',effect:function(t,e,i){void 0!=i.discard.find((function(t){return"\u673a\u4f1a"==t.name}))&&(i.score+=2)}}].map((function(t){return Object(o.a)(Object(o.a)({},t),{},{is_goal:!0,illust:A})})),j=function(t,e){return function(i,n,a,s){if(s&&!s.is_achieved){var c=a.entities.reduce((function(t,e){if("object"==typeof e){var i=Object(d.a)(t);return i[e.fruit]+=1,i}return t}),[0,0,0]),r=c.map((function(e,i){return e-t[i]>=0})),p=!r.includes(!1);console.log("D:".concat(r,", F:").concat(c,", A:").concat(p)),p&&(a.score+=e,s.is_achieved=!0,i.gamelogs.unshift("\u548c\u724c!"))}}},k=[{name:"\u516c\u5171\u76ee\u6807(3\u5206)",desc:"AAA",effect:j([3,0,0],3)},{name:"\u516c\u5171\u76ee\u6807(3\u5206)",desc:"BBB",effect:j([0,3,0],3)},{name:"\u516c\u5171\u76ee\u6807(3\u5206)",desc:"CCC",effect:j([0,0,3],3)},{name:"\u516c\u5171\u76ee\u6807(4\u5206)",desc:"ABC",effect:j([1,1,1],4)},{name:"\u516c\u5171\u76ee\u6807(4\u5206)",desc:"AABB",effect:j([2,2,0],4)},{name:"\u516c\u5171\u76ee\u6807(4\u5206)",desc:"AACC",effect:j([2,0,2],4)},{name:"\u516c\u5171\u76ee\u6807(4\u5206)",desc:"BBCC",effect:j([0,2,2],4)}].map((function(t){return Object(o.a)(Object(o.a)({},t),{},{is_goal:!0,is_public:!0,illust:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/green-salad_1f957.png"})}));function F(t,e){var i=t.splice(0,1)[0];return i?(e.unshift(i),i):void 0}function w(){return{score:0,hand:[],deck:[],discard:[],goals:[],entities:["skip"],previous_action:void 0,finished:!1,out:!1}}var v=function(t,e){t.phase="place",t.round+=1,t.deck=function(t){var e,i,n=[].concat(Object(d.a)(g.a.times(6,(function(){return"\u70b8\u5f39"}))),Object(d.a)(g.a.times(4,(function(){return"\u62a4\u7532"}))),Object(d.a)(g.a.times(3,(function(){return"\u767d\u5ad6"}))),Object(d.a)(g.a.times(2,(function(){return"\u53cd\u5411\u767d\u5ad6"}))),Object(d.a)(g.a.times(3,(function(){return"\u62c6\u5f39"}))),Object(d.a)(g.a.times(2,(function(){return"\u5f15\u7206"}))),Object(d.a)(g.a.times(1,(function(){return"\u52a0\u901f"}))),Object(d.a)(g.a.times(3,(function(){return"\u5f52\u6863"}))),Object(d.a)(g.a.times(2,(function(){return"\u978b\u5b50"}))),Object(d.a)(g.a.times(1,(function(){return"\u88f8\u5954"}))),Object(d.a)(g.a.times(2,(function(){return"\u9001\u6e29\u6696"}))),Object(d.a)(g.a.times(1,(function(){return"\u897f\u7ea2\u67ff"}))),Object(d.a)(g.a.times(1,(function(){return"\u67e0\u6aac"}))),Object(d.a)(g.a.times(1,(function(){return"\u82f9\u679c"}))),Object(d.a)(g.a.times(2,(function(){return"\u673a\u4f1a"})))).map((function(t){return B.find((function(e){return e.name==t}))})).filter((function(t){return void 0!=t})).map((function(t){return Object(o.a)({},t)})),a=Object(u.a)(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.has_fruit&&(s.fruit=t.random.Die(3)-1)}}catch(c){a.e(c)}finally{a.f()}return(null===(e=t.random)||void 0===e?void 0:e.Shuffle(n))||n}(e),t.init_player=(t.init_player+1)%4;var i,n=Object(u.a)(t.players);try{for(n.s();!(i=n.n()).done;){var a=i.value;a.deck=[],a.hand=[],a.discard=[],a.entities=["skip"],a.out=!1,a.finished=!1,a.previous_action=void 0}}catch(s){n.e(s)}finally{n.f()}!function(t,e){for(var i=e.random.Shuffle([].concat(Object(d.a)(b),Object(d.a)(b.filter((function(t){return t.stackable}))))),n=0;n<t.players.length;n++)t.players[n].goals=i.slice(2*n,2*n+2);t.public_goals=e.random.Shuffle(k.map((function(t){return Object(o.a)(Object(o.a)({},t),{},{is_achieved:!1})}))).slice(0,1)}(t,e),function(t,e){var i,n=Object(u.a)(t.players);try{for(n.s();!(i=n.n()).done;)i.value.hand=t.deck.slice(0,7),t.deck=t.deck.slice(7)}catch(s){n.e(s)}finally{n.f()}}(t)};function y(t,e,i,n){for(var a=0;a<3;a++)for(var s=0;s<n[a];s++)i.entities.push({fruit:a});var c,r=Object(u.a)(t.public_goals);try{for(r.s();!(c=r.n()).done;){var p=c.value;p.effect(t,e,i,p)}}catch(o){r.e(o)}finally{r.f()}}function x(t,e){var i=(e+1)%t.length;return t[i].finished?x(t,i):i}var O=function(t,e,i,n,a){var s=t.players[i],c=s.hand[n];s.hand=s.hand.filter((function(t){return t!=c})),t.players[(i+a)%t.players.length].deck.unshift(c),s.previous_action=a},C=function(t,e){var i=t.players.map((function(t){return t.hand})),n=i.length;if(0==i[0].length)console.log("Time to enter the action phase"),function(t,e){t.phase="action";var i,n=Object(u.a)(t.players);try{for(n.s();!(i=n.n()).done;){var a=i.value;a.deck=e.random.Shuffle(a.deck),a.deck=[].concat(Object(d.a)(a.deck),Object(d.a)(a.goals))}}catch(s){n.e(s)}finally{n.f()}t.next_action="flip",t.active_player_idx=t.init_player}(t,e);else{i=[i[n-1]].concat(Object(d.a)(i.slice(0,n-1)));for(var a=0;a<n;a++)t.players[a].hand=i[a]}var s,c=Object(u.a)(t.players);try{for(c.s();!(s=c.n()).done;){s.value.placed=!1}}catch(r){c.e(r)}finally{c.f()}};function D(t){var e=t.deck[0];void 0!=e&&(t.deck=t.deck.slice(1),t.discard.unshift(e))}function N(t){var e=t.entities.map((function(t,e){return"shield"==t?e:void 0})).filter((function(t){return void 0!=t}))[0];console.log("Find shield:",e),void 0!=e?t.entities=t.entities.filter((function(t,i){return i!=e})):(console.log("Player ".concat(t.score,"\u5206 is out")),t.out=!0)}var I=function(t,e,i){if("execute"==t.next_action||i)if(function(t){return void 0==t.players.find((function(t){return!t.finished}))}(t))!function(t,e){v(t,e)}(t,e);else{var n=x(t.players,t.active_player_idx);t.active_player_idx=n,t.next_action="flip"}else t.next_action="execute"},S=function(t,e,i,n){if("flip"!=t.next_action||t.active_player_idx!=i)return f.t;var a=t.players[t.active_player_idx],s=!1;if("skip"==n){var c=a.entities.find((function(t){return"skip"==t}));if(void 0==c)return f.t;var r=a.entities.indexOf(c);D(a),a.entities.splice(r,1),s=!0,z(t,e,"\u9009\u62e9\u8df3\u8fc7")}else if("object"==typeof n&&"archive_idx"in n){var p=a.hand[n.archive_idx];if(void 0==p)return f.t;a.hand=a.hand.filter((function(t){return t!=p})),a.discard.unshift(p)}else D(a),console.log("\u7ffb\u5f00\u724c",a.discard[0].name),z(t,e,"\u7ffb\u5f00 ".concat(a.discard[0].name));I(t,e,s)},G=function(t,e,i,n){if(i!=t.active_player_idx)return f.t;var a=t.players[t.active_player_idx],s=a.discard[0];if(console.log("".concat(i," is executing")),"fruit"==n){if(console.log("Gonna add fruit"),void 0==s.fruit)return f.t;var c=[0,0,0];c[s.fruit]=1,y(t,e,a,c),z(t,e,"\u5c06 ".concat(s.name," \u4f5c\u4e3a\u6c34\u679c"))}else console.log("Just execute ".concat(s.name)),console.log(Object(o.a)({},s)),s.effect&&s.effect(t,e,a,s),z(t,e,"\u6267\u884c ".concat(s.name));a.finished=a.out||0==a.deck.length,I(t,e)},z=function(t,e,i){t.gamelogs.unshift(i)},P={setup:function(t){var e,i={deck:[],players:g.a.times(4,w),public_goals:[],actions:[],round:-1,init_player:((null===(e=t.random)||void 0===e?void 0:e.Die(4))||1)-1,active_player_idx:0,next_action:"place",phase:"place",host:0,ai_players:[0,1,2,3].slice(t.numPlayers),gamelogs:[]};return function(t,e){for(var i=t.players.length,n=e.random.Shuffle(h).slice(0,i),a=0;a<i;a++)t.players[a].illust=n[a]}(i,t),v(i,t),console.log("How many Players AI: ".concat(t.numPlayers," ").concat(i.ai_players)),i},moves:{add_action:function(t,e,i){t.actions.push(i),t.players[i.from_idx].placed=!0,i.from_idx==t.host&&function(t,e){var i,n=Object(u.a)(t.ai_players);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=e.random.Die(t.players[a].hand.length)-1,c=e.random.Die(t.players.length)-1;t.actions.push({from_idx:a,card_idx:s,direction:c})}}catch(r){n.e(r)}finally{n.f()}}(t,e),console.log("Actions length: ".concat(t.actions.length)),t.actions.length==t.players.length&&function(t,e){var i,n=Object(u.a)(t.actions);try{for(n.s();!(i=n.n()).done;){var a=i.value;O(t,0,a.from_idx,a.card_idx,a.direction)}}catch(s){n.e(s)}finally{n.f()}t.actions=[],C(t,e)}(t,e)},flip:S,execute:G,ai_act:function(t,e,i){if(!t.ai_players.includes(t.active_player_idx)||t.host!=i)return f.t;if("flip"==t.next_action){S(t,e,t.active_player_idx,"flip")}else{if("execute"!=t.next_action)return f.t;G(t,e,t.active_player_idx,"execute")}},log_msg:z},minPlayers:1,maxPlayers:4,turn:{activePlayers:f.H.ALL}},T=i(25),L=(i(36),{height:"auto",width:"1.0em"}),M=["https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/tomato_1f345.png","https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/lemon_1f34b.png","https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/green-apple_1f34f.png"].map((function(t){return Object(n.jsx)("img",{src:t,style:L})})),H=Object(n.jsx)("img",{src:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/twitter/259/shield_1f6e1.png",style:L}),R=Object(n.jsx)("img",{src:"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/twitter/259/running-shoe_1f45f.png",style:L});function J(){return{board:"GoalBoard",player_idx:0,log:""}}function K(t,e){var i=t.players[e.player_idx];if("place"==t.phase)return i.placed||void 0==e.hand_selected?[]:function(t,e){var i=["\u81ea\u5df1","\u4e0b\u5bb6","\u4e0a\u5bb6","\u5bf9\u5bb6"];return[0,1,3,2].map((function(n,a){return{name:i[a],action:"add_place_action",args:[t,e,n]}}))}(e.player_idx,e.hand_selected);if(t.active_player_idx==e.player_idx){if("flip"==t.next_action){var n=[{name:"\u7ffb\u5f00",action:"flip",args:[e.player_idx,"flip"]}];return i.entities.includes("skip")&&n.push({name:"\u8df3\u8fc7",action:"flip",args:[e.player_idx,"skip"]}),i.hand.length>0&&void 0!=e.hand_selected&&n.unshift({name:"\u6253\u51fa\u5b58\u6863",action:"flip",args:[e.player_idx,{archive_idx:e.hand_selected}]}),n}var a=[{name:"\u6267\u884c",action:"execute",args:[e.player_idx,"execute"]}];return void 0!=i.discard[0].fruit&&a.push({name:"\u4f5c\u4e3a\u6c34\u679c",action:"execute",args:[e.player_idx,"fruit"]}),a}return e.player_idx==t.host&&t.ai_players.includes(t.active_player_idx)?[{name:"\u884c\u52a8",action:"ai_act",args:[e.player_idx]}]:[]}var W=function(t,e){t.log=e},X={select_hand:function(t,e,i){!function(t,e){t.hand_selected==e?t.hand_selected=void 0:t.hand_selected=e}(t,e);var a=i[e];W(t,Object(n.jsxs)("span",{children:[a.name,": ",a.desc]}))},clear_state:function(t){t.hand_selected=void 0},change_board:function(t,e){t.board=e},log_msg:W};function q(t,e){var i={};for(var n in e)i[n]=t(e[n],n);return i}var Q={add_place_action:function(t,e,i,n,a){t.add_action({from_idx:i,card_idx:n,direction:a}),e.clear_state()},ai_act:function(t,e,i){t.ai_act(i)},flip:function(t,e,i,n){t.flip(i,n)},execute:function(t,e,i,n){t.execute(i,n)}};function U(t){return Object(n.jsxs)("div",{className:"top-panel",children:[Object(n.jsx)("button",{className:"check-goal-button",onClick:t.checkGoal,children:"\u67e5\u770b\u76ee\u6807"}),t.gameCount]})}function V(t){return Object(n.jsx)("div",{className:"deck-area",children:Object(n.jsx)("div",{className:"card-num",children:t.cardNum})})}function Y(t){return Object(n.jsx)("div",{className:"play-area",children:Object(n.jsx)(ct,Object(o.a)({},t.playedCard))})}function Z(t){return Object(n.jsxs)("div",{className:"card-areas",children:[Object(n.jsx)(V,{cardNum:t.cardNum}),Object(n.jsx)(Y,{playedCard:t.playedCard})]})}function $(t){return Object(n.jsx)("div",{className:"avatar",style:{border:t.selected?"3px solid #61dafb":t.out?"1px solid #f5222d":void 0},children:Object(n.jsx)("img",{src:t.illust,className:"avatar-img"})})}function tt(t){return Object(n.jsx)("div",{className:"info-line",style:{color:"\u6263\u7ed9\u4f60"==t.content?"#61dafb":void 0},children:t.content})}function et(t){return Object(n.jsxs)("div",{className:"player-info",children:[Object(n.jsx)($,{illust:t.illust,selected:t.selected,out:t.out}),Object(n.jsx)(tt,{content:"".concat(t.name,"(").concat(t.score,"\u5206)")}),Object(n.jsx)(tt,{content:t.info})]})}function it(t){return Object(n.jsxs)("div",{className:"player",children:[Object(n.jsx)(Z,{cardNum:t.playerInfo.deck.length,playedCard:t.playerInfo.discard[0]}),Object(n.jsx)(et,Object(o.a)({},t.playerInfo))]})}function nt(t){return Object(n.jsx)("div",{className:"central",children:t.players.map((function(t){return Object(n.jsx)(it,{playerInfo:t})}))})}function at(t){return Object(a.useEffect)((function(){return console.log(t.log)}),[t.log]),Object(n.jsx)("div",{className:"info-panel",children:t.log})}function st(t){var e=t.operations[0],i=e&&"\u884c\u52a8"==e.name;Object(a.useEffect)((function(){if(1==i){var e=t.operations[0];console.log("Ready to auto_move ".concat(t.G.active_player_idx," ").concat(t.G.next_action)),setTimeout((function(){var i;(i=t.combined)[e.action].apply(i,Object(d.a)(e.args||[]))}),600)}}),[t.G.active_player_idx,t.G.next_action]);var s=i?[]:t.operations;return Object(n.jsx)("div",{className:"controller",children:s.map((function(e){return Object(n.jsx)("button",{className:"controller-button",onClick:function(){var i;return(i=t.combined)[e.action].apply(i,Object(d.a)(e.args||[]))},children:e.name})}))})}function ct(t){return Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)("div",{className:"illust-container",children:Object(n.jsx)("img",{className:"illust",src:t.illust})}),Object(n.jsx)("div",{className:"card-fruit",style:{display:void 0!=t.fruit?void 0:"none"},children:void 0!=t.fruit?M[t.fruit]:""})]})}function rt(t){return Object(n.jsx)("div",{className:"card-container",style:{border:1==t.card.selected?"3px solid #61dafb":void 0},onClick:t.handleClick,children:Object(n.jsx)(ct,Object(o.a)({},t.card))})}function pt(t){return Object(n.jsx)("div",{className:"card-row",children:t.cards.map((function(e,i){return Object(n.jsx)(rt,{card:e,handleClick:t.handleCardClick(i)})}))})}function ot(t,e,i){return"place"==e.phase?void 0!=t.previous_action?(e.players.indexOf(t)+t.previous_action)%4==i.player_idx&&0!=t.previous_action?"\u6263\u7ed9\u4f60":["\u6263\u7ed9\u81ea\u5df1","\u6263\u7ed9\u4e0b\u5bb6","\u6263\u7ed9\u5bf9\u5bb6","\u6263\u7ed9\u4e0a\u5bb6"][t.previous_action]:"\u51c6\u5907\u6263\u724c":t.finished?t.out?"\u5df2\u51fa\u5c40":"\u5df2\u5b8c\u6210":t.entities.map((function(t){return function(t){return"object"==typeof t?M[t.fruit]:"shield"==t?H:R}(t)}))}function Et(t,e){var i=t-e;return i<0?4+i:i}function lt(t){return Object(n.jsxs)("div",{className:"board",children:[Object(n.jsx)(nt,{players:(i=t.G.players.map((function(e,i){return function(t,e,i,n){return Object(o.a)(Object(o.a)({},t),{},{name:["\u73a9\u5bb6","\u4e0b\u5bb6","\u5bf9\u5bb6","\u4e0a\u5bb6"][Et(e,n.player_idx)],info:ot(t,i,n),selected:"action"==i.phase&&e==i.active_player_idx})}(e,i,t.G,t.S)})),a=[(t.S.player_idx+2)%4,(t.S.player_idx+3)%4,(t.S.player_idx+1)%4,t.S.player_idx],a.map((function(t){return i[t]})))}),Object(n.jsx)(at,{log:"place"==t.G.phase?t.S.log:t.G.gamelogs[0]}),Object(n.jsx)(st,{operations:K(t.G,t.S),combined:t.combined,G:t.G}),Object(n.jsx)(pt,{cards:t.G.players[t.S.player_idx].hand.map((e=t.S,function(t,i){return Object(o.a)(Object(o.a)({},t),{},{selected:e.hand_selected==i})})),handleCardClick:function(e){return function(){return t.actions.select_hand(e,t.G.players[t.S.player_idx].hand)}}}),Object(n.jsx)(U,{gameCount:"".concat("\u6771\u5357\u897f"[Math.floor(t.G.round/4)]).concat(t.G.round%4+1,"\u5c40"),checkGoal:function(){return t.actions.change_board("GoalBoard")}})]});var e,i,a}function ut(t){var e=1==t.goal.is_public?"https://emojipedia-us.s3.dualstack.us-west-1.amazonaws.com/thumbs/240/google/263/green-salad_1f957.png":A;return Object(n.jsxs)("div",{className:"goal",children:[Object(n.jsx)("div",{className:"goal-illust-container",children:Object(n.jsx)("img",{className:"goal-illust",src:e})}),Object(n.jsx)("div",{className:"goal-desc-container",children:Object(n.jsxs)("div",{className:"goal-desc",children:[t.goal.name,Object(n.jsx)("br",{}),t.goal.desc]})})]})}function dt(t){var e={A:M[0],B:M[1],C:M[2]};return t.split("").map((function(t){return e[t]}))}var ft={GameBoard:lt,GoalBoard:function(t){return Object(n.jsxs)("div",{className:"board",children:[Object(n.jsxs)("div",{className:"goals-container",children:[t.G.public_goals.filter((function(t){return!t.is_achieved})).map((function(t){return Object(n.jsx)(ut,{goal:{name:t.name,desc:dt(t.desc),is_public:t.is_public}})})),t.G.players[t.S.player_idx].goals.map((function(t){return Object(n.jsx)(ut,{goal:{name:t.name,desc:t.desc,is_public:t.is_public}})}))]}),Object(n.jsx)("button",{className:"gb-back-button",onClick:function(){return t.actions.change_board("GameBoard")},children:"\u8fd4\u56de"})]})}};function mt(t){var e=Object(a.useState)(J),i=Object(p.a)(e,2),n=i[0],s=i[1],c=q((function(t){return function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return s(Object(T.b)((function(e){return t.apply(void 0,[e].concat(i))})))}}),X),r=q((function(e){return function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e.apply(void 0,[t.moves,c].concat(n))}}),Q),E=t.G,l=t.ctx,u=t.moves,d={G:E,ctx:l,moves:u,S:n,actions:c,combined:r};return Object(a.useEffect)((function(){"place"==E.phase&&c.change_board("GoalBoard")}),[E.phase]),Object(a.useEffect)((function(){s(Object(o.a)(Object(o.a)({},n),{},{player_idx:parseInt(t.playerID||"0")})),console.log(Object(o.a)({},t)),console.log("The player ID is: ".concat(t.playerID))}),[]),(ft[n.board]||lt)(d)}i(74);var gt=function(t){return Object(n.jsx)("div",{className:"board",children:Object(n.jsxs)("div",{className:"title-block",children:[Object(n.jsx)("div",{className:"title-img-container",children:Object(n.jsx)("img",{className:"title-img",src:t.titleImg})}),Object(n.jsx)("h2",{className:"title",children:t.title}),Object(n.jsxs)("div",{children:["\u5236\u4f5c: ",Object(n.jsx)("a",{href:"https://space.bilibili.com/8492192/dynamic/",className:"title-a",children:"\u5927\u96d5\u6e38\u620f"})]}),t.operations.map((function(t){return Object(n.jsxs)("span",{children:[Object(n.jsx)("button",{className:"title-screen-button primary",onClick:t.effect,children:t.name}),Object(n.jsx)("br",{})]})}))]})})},Bt=i(45),ht=(i(77),[["\u7f57\u5bbe","http://prts.wiki/images/1/1f/%E5%A4%B4%E5%83%8F_%E7%BD%97%E5%AE%BE.png"],["\u5361\u592b\u5361","http://prts.wiki/images/8/8d/%E5%A4%B4%E5%83%8F_%E5%8D%A1%E5%A4%AB%E5%8D%A1.png"],["\u5c71","http://prts.wiki/images/e/ec/%E5%A4%B4%E5%83%8F_%E5%B1%B1.png"],["\u677e\u679c","http://prts.wiki/images/5/5e/%E5%A4%B4%E5%83%8F_%E6%9D%BE%E6%9E%9C.png"],["\u963f\u7c73\u5a05(\u8fd1\u536b)","http://prts.wiki/images/5/5b/%E5%A4%B4%E5%83%8F_%E9%98%BF%E7%B1%B3%E5%A8%85%28%E8%BF%91%E5%8D%AB%29.png"],["\u8ff7\u8fed\u9999","http://prts.wiki/images/3/3b/%E5%A4%B4%E5%83%8F_%E8%BF%B7%E8%BF%AD%E9%A6%99.png"],["\u6ce5\u5ca9","http://prts.wiki/images/0/06/%E5%A4%B4%E5%83%8F_%E6%B3%A5%E5%B2%A9.png"],["\u7d6e\u96e8","http://prts.wiki/images/3/34/%E5%A4%B4%E5%83%8F_%E7%B5%AE%E9%9B%A8.png"],["\u6770\u514b","http://prts.wiki/images/d/d8/%E5%A4%B4%E5%83%8F_%E6%9D%B0%E5%85%8B.png"],["\u7455\u5149","http://prts.wiki/images/f/f7/%E5%A4%B4%E5%83%8F_%E7%91%95%E5%85%89.png"],["\u5965\u65af\u5854","http://prts.wiki/images/4/49/%E5%A4%B4%E5%83%8F_%E5%A5%A5%E6%96%AF%E5%A1%94.png"],["\u97ad\u5203","http://prts.wiki/images/f/f8/%E5%A4%B4%E5%83%8F_%E9%9E%AD%E5%88%83.png"],["\u6ce1\u6ce1","http://prts.wiki/images/2/28/%E5%A4%B4%E5%83%8F_%E6%B3%A1%E6%B3%A1.png"],["\u53f2\u5c14\u7279\u5c14","http://prts.wiki/images/e/e1/%E5%A4%B4%E5%83%8F_%E5%8F%B2%E5%B0%94%E7%89%B9%E5%B0%94.png"],["\u56db\u6708","http://prts.wiki/images/d/d3/%E5%A4%B4%E5%83%8F_%E5%9B%9B%E6%9C%88.png"],["\u8584\u7eff","http://prts.wiki/images/3/30/%E5%A4%B4%E5%83%8F_%E8%96%84%E7%BB%BF.png"],["\u82b3\u6c40","http://prts.wiki/images/6/6a/%E5%A4%B4%E5%83%8F_%E8%8A%B3%E6%B1%80.png"],["\u68ee\u86ba","http://prts.wiki/images/7/74/%E5%A4%B4%E5%83%8F_%E6%A3%AE%E8%9A%BA.png"],["\u71e7\u77f3","http://prts.wiki/images/a/ac/%E5%A4%B4%E5%83%8F_%E7%87%A7%E7%9F%B3.png"],["\u7279\u7c73\u7c73","http://prts.wiki/images/b/b9/%E5%A4%B4%E5%83%8F_%E7%89%B9%E7%B1%B3%E7%B1%B3.png"],["\u9178\u7cd6","http://prts.wiki/images/e/e9/%E5%A4%B4%E5%83%8F_%E9%85%B8%E7%B3%96.png"],["\u68d8\u523a","http://prts.wiki/images/2/2a/%E5%A4%B4%E5%83%8F_%E6%A3%98%E5%88%BA.png"],["\u5b89\u54f2\u62c9","http://prts.wiki/images/3/36/%E5%A4%B4%E5%83%8F_%E5%AE%89%E5%93%B2%E6%8B%89.png"],["\u5b51","http://prts.wiki/images/5/54/%E5%A4%B4%E5%83%8F_%E5%AD%91.png"],["\u8d3e\u7ef4","http://prts.wiki/images/2/2a/%E5%A4%B4%E5%83%8F_%E8%B4%BE%E7%BB%B4.png"],["\u871c\u8721","http://prts.wiki/images/1/1d/%E5%A4%B4%E5%83%8F_%E8%9C%9C%E8%9C%A1.png"],["\u7a00\u97f3","http://prts.wiki/images/c/c6/%E5%A4%B4%E5%83%8F_%E7%A8%80%E9%9F%B3.png"],["\u94c3\u5170","http://prts.wiki/images/5/55/%E5%A4%B4%E5%83%8F_%E9%93%83%E5%85%B0.png"],["\u65ad\u5d16","http://prts.wiki/images/e/ea/%E5%A4%B4%E5%83%8F_%E6%96%AD%E5%B4%96.png"],["\u4e9a\u53f6","http://prts.wiki/images/b/b5/%E5%A4%B4%E5%83%8F_%E4%BA%9A%E5%8F%B6.png"],["\u5361\u8fbe","http://prts.wiki/images/4/43/%E5%A4%B4%E5%83%8F_%E5%8D%A1%E8%BE%BE.png"],["\u65e9\u9732","http://prts.wiki/images/6/63/%E5%A4%B4%E5%83%8F_%E6%97%A9%E9%9C%B2.png"],["\u83b1\u6069\u54c8\u7279","http://prts.wiki/images/0/03/%E5%A4%B4%E5%83%8F_%E8%8E%B1%E6%81%A9%E5%93%88%E7%89%B9.png"],["\u82e6\u827e","http://prts.wiki/images/e/e9/%E5%A4%B4%E5%83%8F_%E8%8B%A6%E8%89%BE.png"],["\u6ce2\u767b\u53ef","http://prts.wiki/images/4/43/%E5%A4%B4%E5%83%8F_%E6%B3%A2%E7%99%BB%E5%8F%AF.png"],["\u6708\u79be","http://prts.wiki/images/b/b6/%E5%A4%B4%E5%83%8F_%E6%9C%88%E7%A6%BE.png"],["\u77f3\u68c9","http://prts.wiki/images/1/18/%E5%A4%B4%E5%83%8F_%E7%9F%B3%E6%A3%89.png"],["W","http://prts.wiki/images/d/d6/%E5%A4%B4%E5%83%8F_W.png"],["\u6e29\u8482","http://prts.wiki/images/9/93/%E5%A4%B4%E5%83%8F_%E6%B8%A9%E8%92%82.png"],["\u6781\u5883","http://prts.wiki/images/9/97/%E5%A4%B4%E5%83%8F_%E6%9E%81%E5%A2%83.png"],["THRM-EX","http://prts.wiki/images/d/d8/%E5%A4%B4%E5%83%8F_THRM-EX.png"],["\u5080\u5f71","http://prts.wiki/images/8/83/%E5%A4%B4%E5%83%8F_%E5%82%80%E5%BD%B1.png"],["\u5deb\u604b","http://prts.wiki/images/3/36/%E5%A4%B4%E5%83%8F_%E5%B7%AB%E6%81%8B.png"],["\u94f8\u94c1","http://prts.wiki/images/8/84/%E5%A4%B4%E5%83%8F_%E9%93%B8%E9%93%81.png"],["\u523b\u5200","http://prts.wiki/images/2/2c/%E5%A4%B4%E5%83%8F_%E5%88%BB%E5%88%80.png"],["\u65ad\u7f6a\u8005","http://prts.wiki/images/f/f2/%E5%A4%B4%E5%83%8F_%E6%96%AD%E7%BD%AA%E8%80%85.png"],["\u98ce\u7b1b","http://prts.wiki/images/d/de/%E5%A4%B4%E5%83%8F_%E9%A3%8E%E7%AC%9B.png"],["\u6151\u7802","http://prts.wiki/images/e/e7/%E5%A4%B4%E5%83%8F_%E6%85%91%E7%A0%82.png"],["\u67cf\u5599","http://prts.wiki/images/2/2f/%E5%A4%B4%E5%83%8F_%E6%9F%8F%E5%96%99.png"],["\u5bb4","http://prts.wiki/images/f/f4/%E5%A4%B4%E5%83%8F_%E5%AE%B4.png"],["\u6e05\u6d41","http://prts.wiki/images/1/19/%E5%A4%B4%E5%83%8F_%E6%B8%85%E6%B5%81.png"],["\u523b\u4fc4\u67cf","http://prts.wiki/images/4/4a/%E5%A4%B4%E5%83%8F_%E5%88%BB%E4%BF%84%E6%9F%8F.png"],["\u60ca\u86f0","http://prts.wiki/images/8/81/%E5%A4%B4%E5%83%8F_%E6%83%8A%E8%9B%B0.png"],["\u5e74","http://prts.wiki/images/9/9c/%E5%A4%B4%E5%83%8F_%E5%B9%B4.png"],["\u963f","http://prts.wiki/images/3/31/%E5%A4%B4%E5%83%8F_%E9%98%BF.png"],["\u543d","http://prts.wiki/images/4/41/%E5%A4%B4%E5%83%8F_%E5%90%BD.png"],["\u96ea\u96c9","http://prts.wiki/images/2/24/%E5%A4%B4%E5%83%8F_%E9%9B%AA%E9%9B%89.png"],["\u714c","http://prts.wiki/images/3/30/%E5%A4%B4%E5%83%8F_%E7%85%8C.png"],["\u7070\u5589","http://prts.wiki/images/3/3b/%E5%A4%B4%E5%83%8F_%E7%81%B0%E5%96%89.png"],["\u5b89\u6bd4\u5c14","http://prts.wiki/images/f/ff/%E5%A4%B4%E5%83%8F_%E5%AE%89%E6%AF%94%E5%B0%94.png"],["\u5e03\u6d1b\u5361","http://prts.wiki/images/0/04/%E5%A4%B4%E5%83%8F_%E5%B8%83%E6%B4%9B%E5%8D%A1.png"],["\u82c7\u8349","http://prts.wiki/images/7/7a/%E5%A4%B4%E5%83%8F_%E8%8B%87%E8%8D%89.png"],["\u83ab\u65af\u63d0\u9a6c","http://prts.wiki/images/0/0b/%E5%A4%B4%E5%83%8F_%E8%8E%AB%E6%96%AF%E6%8F%90%E9%A9%AC.png"],["\u69d0\u7425","http://prts.wiki/images/e/ed/%E5%A4%B4%E5%83%8F_%E6%A7%90%E7%90%A5.png"],["\u62dc\u677e","http://prts.wiki/images/b/b2/%E5%A4%B4%E5%83%8F_%E6%8B%9C%E6%9D%BE.png"],["\u6885","http://prts.wiki/images/a/ac/%E5%A4%B4%E5%83%8F_%E6%A2%85.png"],["\u5fae\u98ce","http://prts.wiki/images/a/ad/%E5%A4%B4%E5%83%8F_%E5%BE%AE%E9%A3%8E.png"],["\u4f0a\u6851","http://prts.wiki/images/c/c1/%E5%A4%B4%E5%83%8F_%E4%BC%8A%E6%A1%91.png"],["\u9ea6\u54f2\u4f26","http://prts.wiki/images/4/4d/%E5%A4%B4%E5%83%8F_%E9%BA%A6%E5%93%B2%E4%BC%A6.png"],["\u9001\u846c\u4eba","http://prts.wiki/images/d/da/%E5%A4%B4%E5%83%8F_%E9%80%81%E8%91%AC%E4%BA%BA.png"],["\u708e\u5ba2","http://prts.wiki/images/d/d6/%E5%A4%B4%E5%83%8F_%E7%82%8E%E5%AE%A2.png"],["\u7ea2\u4e91","http://prts.wiki/images/a/af/%E5%A4%B4%E5%83%8F_%E7%BA%A2%E4%BA%91.png"],["\u575a\u96f7","http://prts.wiki/images/a/ab/%E5%A4%B4%E5%83%8F_%E5%9D%9A%E9%9B%B7.png"],["\u8d6b\u62c9\u683c","http://prts.wiki/images/c/cd/%E5%A4%B4%E5%83%8F_%E8%B5%AB%E6%8B%89%E6%A0%BC.png"],["\u661f\u6781","http://prts.wiki/images/e/ee/%E5%A4%B4%E5%83%8F_%E6%98%9F%E6%9E%81.png"],["\u6843\u91d1\u5a18","http://prts.wiki/images/9/9d/%E5%A4%B4%E5%83%8F_%E6%A1%83%E9%87%91%E5%A8%98.png"],["\u9ed1","http://prts.wiki/images/d/d4/%E5%A4%B4%E5%83%8F_%E9%BB%91.png"],["\u683c\u52b3\u514b\u65af","http://prts.wiki/images/5/53/%E5%A4%B4%E5%83%8F_%E6%A0%BC%E5%8A%B3%E5%85%8B%E6%96%AF.png"],["\u9521\u5170","http://prts.wiki/images/3/39/%E5%A4%B4%E5%83%8F_%E9%94%A1%E5%85%B0.png"],["\u82cf\u82cf\u6d1b","http://prts.wiki/images/6/63/%E5%A4%B4%E5%83%8F_%E8%8B%8F%E8%8B%8F%E6%B4%9B.png"],["\u9648","http://prts.wiki/images/c/cf/%E5%A4%B4%E5%83%8F_%E9%99%88.png"],["\u8bd7\u6000\u96c5","http://prts.wiki/images/5/50/%E5%A4%B4%E5%83%8F_%E8%AF%97%E6%80%80%E9%9B%85.png"],["\u683c\u96f7\u4f0a","http://prts.wiki/images/f/fe/%E5%A4%B4%E5%83%8F_%E6%A0%BC%E9%9B%B7%E4%BC%8A.png"],["\u6591\u70b9","http://prts.wiki/images/3/30/%E5%A4%B4%E5%83%8F_%E6%96%91%E7%82%B9.png"],["\u6ce1\u666e\u5361","http://prts.wiki/images/1/16/%E5%A4%B4%E5%83%8F_%E6%B3%A1%E6%99%AE%E5%8D%A1.png"],["\u65af\u5361\u8482","http://prts.wiki/images/5/53/%E5%A4%B4%E5%83%8F_%E6%96%AF%E5%8D%A1%E8%92%82.png"],["\u683c\u62c9\u5c3c","http://prts.wiki/images/2/29/%E5%A4%B4%E5%83%8F_%E6%A0%BC%E6%8B%89%E5%B0%BC.png"],["\u591c\u9b54","http://prts.wiki/images/a/a7/%E5%A4%B4%E5%83%8F_%E5%A4%9C%E9%AD%94.png"],["\u730e\u8702","http://prts.wiki/images/c/c2/%E5%A4%B4%E5%83%8F_%E7%8C%8E%E8%9C%82.png"],["\u6708\u89c1\u591c","http://prts.wiki/images/b/b7/%E5%A4%B4%E5%83%8F_%E6%9C%88%E8%A7%81%E5%A4%9C.png"],["\u7a7a\u7206","http://prts.wiki/images/c/cd/%E5%A4%B4%E5%83%8F_%E7%A9%BA%E7%88%86.png"],["\u66b4\u884c","http://prts.wiki/images/3/36/%E5%A4%B4%E5%83%8F_%E6%9A%B4%E8%A1%8C.png"],["\u94f6\u7070","http://prts.wiki/images/2/27/%E5%A4%B4%E5%83%8F_%E9%93%B6%E7%81%B0.png"],["\u585e\u96f7\u5a05","http://prts.wiki/images/e/ee/%E5%A4%B4%E5%83%8F_%E5%A1%9E%E9%9B%B7%E5%A8%85.png"],["\u661f\u718a","http://prts.wiki/images/0/07/%E5%A4%B4%E5%83%8F_%E6%98%9F%E7%86%8A.png"],["\u591c\u83ba","http://prts.wiki/images/6/64/%E5%A4%B4%E5%83%8F_%E5%A4%9C%E8%8E%BA.png"],["\u95ea\u7075","http://prts.wiki/images/5/54/%E5%A4%B4%E5%83%8F_%E9%97%AA%E7%81%B5.png"],["\u5b89\u6d01\u8389\u5a1c","http://prts.wiki/images/c/ca/%E5%A4%B4%E5%83%8F_%E5%AE%89%E6%B4%81%E8%8E%89%E5%A8%9C.png"],["\u827e\u96c5\u6cd5\u62c9","http://prts.wiki/images/c/cc/%E5%A4%B4%E5%83%8F_%E8%89%BE%E9%9B%85%E6%B3%95%E6%8B%89.png"],["\u4f0a\u8299\u5229\u7279","http://prts.wiki/images/e/ed/%E5%A4%B4%E5%83%8F_%E4%BC%8A%E8%8A%99%E5%88%A9%E7%89%B9.png"],["\u63a8\u8fdb\u4e4b\u738b","http://prts.wiki/images/b/ba/%E5%A4%B4%E5%83%8F_%E6%8E%A8%E8%BF%9B%E4%B9%8B%E7%8E%8B.png"],["\u80fd\u5929\u4f7f","http://prts.wiki/images/a/ad/%E5%A4%B4%E5%83%8F_%E8%83%BD%E5%A4%A9%E4%BD%BF.png"],["\u98df\u94c1\u517d","http://prts.wiki/images/d/dd/%E5%A4%B4%E5%83%8F_%E9%A3%9F%E9%93%81%E5%85%BD.png"],["\u72ee\u874e","http://prts.wiki/images/c/c5/%E5%A4%B4%E5%83%8F_%E7%8B%AE%E8%9D%8E.png"],["\u7a7a","http://prts.wiki/images/5/58/%E5%A4%B4%E5%83%8F_%E7%A9%BA.png"],["\u771f\u7406","http://prts.wiki/images/e/e6/%E5%A4%B4%E5%83%8F_%E7%9C%9F%E7%90%86.png"],["\u521d\u96ea","http://prts.wiki/images/d/d7/%E5%A4%B4%E5%83%8F_%E5%88%9D%E9%9B%AA.png"],["\u5d16\u5fc3","http://prts.wiki/images/7/7d/%E5%A4%B4%E5%83%8F_%E5%B4%96%E5%BF%83.png"],["\u5b88\u6797\u4eba","http://prts.wiki/images/2/27/%E5%A4%B4%E5%83%8F_%E5%AE%88%E6%9E%97%E4%BA%BA.png"],["\u666e\u7f57\u65fa\u65af","http://prts.wiki/images/7/72/%E5%A4%B4%E5%83%8F_%E6%99%AE%E7%BD%97%E6%97%BA%E6%96%AF.png"],["\u706b\u795e","http://prts.wiki/images/f/f1/%E5%A4%B4%E5%83%8F_%E7%81%AB%E7%A5%9E.png"],["\u53ef\u9882","http://prts.wiki/images/a/ab/%E5%A4%B4%E5%83%8F_%E5%8F%AF%E9%A2%82.png"],["\u96f7\u86c7","http://prts.wiki/images/f/f5/%E5%A4%B4%E5%83%8F_%E9%9B%B7%E8%9B%87.png"],["\u7ea2","http://prts.wiki/images/a/ac/%E5%A4%B4%E5%83%8F_%E7%BA%A2.png"],["\u4e34\u5149","http://prts.wiki/images/1/1a/%E5%A4%B4%E5%83%8F_%E4%B8%B4%E5%85%89.png"],["\u534e\u6cd5\u7433","http://prts.wiki/images/3/30/%E5%A4%B4%E5%83%8F_%E5%8D%8E%E6%B3%95%E7%90%B3.png"],["\u8d6b\u9ed8","http://prts.wiki/images/3/39/%E5%A4%B4%E5%83%8F_%E8%B5%AB%E9%BB%98.png"],["\u6885\u5c14","http://prts.wiki/images/0/07/%E5%A4%B4%E5%83%8F_%E6%A2%85%E5%B0%94.png"],["\u5929\u706b","http://prts.wiki/images/f/fa/%E5%A4%B4%E5%83%8F_%E5%A4%A9%E7%81%AB.png"],["\u963f\u7c73\u5a05","http://prts.wiki/images/3/36/%E5%A4%B4%E5%83%8F_%E9%98%BF%E7%B1%B3%E5%A8%85.png"],["\u9668\u661f","http://prts.wiki/images/e/ea/%E5%A4%B4%E5%83%8F_%E9%99%A8%E6%98%9F.png"],["\u767d\u91d1","http://prts.wiki/images/3/3b/%E5%A4%B4%E5%83%8F_%E7%99%BD%E9%87%91.png"],["\u84dd\u6bd2","http://prts.wiki/images/6/63/%E5%A4%B4%E5%83%8F_%E8%93%9D%E6%AF%92.png"],["\u5e7d\u7075\u9ca8","http://prts.wiki/images/2/28/%E5%A4%B4%E5%83%8F_%E5%B9%BD%E7%81%B5%E9%B2%A8.png"],["\u62c9\u666e\u5170\u5fb7","http://prts.wiki/images/b/bf/%E5%A4%B4%E5%83%8F_%E6%8B%89%E6%99%AE%E5%85%B0%E5%BE%B7.png"],["\u56e0\u9640\u7f57","http://prts.wiki/images/f/fe/%E5%A4%B4%E5%83%8F_%E5%9B%A0%E9%99%80%E7%BD%97.png"],["\u8299\u5170\u5361","http://prts.wiki/images/2/2b/%E5%A4%B4%E5%83%8F_%E8%8A%99%E5%85%B0%E5%8D%A1.png"],["\u5fb7\u514b\u8428\u65af","http://prts.wiki/images/5/57/%E5%A4%B4%E5%83%8F_%E5%BE%B7%E5%85%8B%E8%90%A8%E6%96%AF.png"],["\u51db\u51ac","http://prts.wiki/images/c/cd/%E5%A4%B4%E5%83%8F_%E5%87%9B%E5%86%AC.png"],["\u767d\u9762\u9e2e","http://prts.wiki/images/8/83/%E5%A4%B4%E5%83%8F_%E7%99%BD%E9%9D%A2%E9%B8%AE.png"],["\u963f\u6d88","http://prts.wiki/images/2/2f/%E5%A4%B4%E5%83%8F_%E9%98%BF%E6%B6%88.png"],["\u5730\u7075","http://prts.wiki/images/5/57/%E5%A4%B4%E5%83%8F_%E5%9C%B0%E7%81%B5.png"],["\u6df1\u6d77\u8272","http://prts.wiki/images/d/d1/%E5%A4%B4%E5%83%8F_%E6%B7%B1%E6%B5%B7%E8%89%B2.png"],["\u53e4\u7c73","http://prts.wiki/images/0/07/%E5%A4%B4%E5%83%8F_%E5%8F%A4%E7%B1%B3.png"],["\u86c7\u5c60\u7bb1","http://prts.wiki/images/0/02/%E5%A4%B4%E5%83%8F_%E8%9B%87%E5%B1%A0%E7%AE%B1.png"],["\u89d2\u5cf0","http://prts.wiki/images/e/e4/%E5%A4%B4%E5%83%8F_%E8%A7%92%E5%B3%B0.png"],["\u8c03\u9999\u5e08","http://prts.wiki/images/6/6a/%E5%A4%B4%E5%83%8F_%E8%B0%83%E9%A6%99%E5%B8%88.png"],["\u5609\u7ef4\u5c14","http://prts.wiki/images/c/cc/%E5%A4%B4%E5%83%8F_%E5%98%89%E7%BB%B4%E5%B0%94.png"],["\u672b\u836f","http://prts.wiki/images/d/d9/%E5%A4%B4%E5%83%8F_%E6%9C%AB%E8%8D%AF.png"],["\u6697\u7d22","http://prts.wiki/images/d/dd/%E5%A4%B4%E5%83%8F_%E6%9A%97%E7%B4%A2.png"],["\u783e","http://prts.wiki/images/c/ce/%E5%A4%B4%E5%83%8F_%E7%A0%BE.png"],["\u6155\u65af","http://prts.wiki/images/f/fc/%E5%A4%B4%E5%83%8F_%E6%85%95%E6%96%AF.png"],["\u827e\u4e1d\u9edb\u5c14","http://prts.wiki/images/5/57/%E5%A4%B4%E5%83%8F_%E8%89%BE%E4%B8%9D%E9%BB%9B%E5%B0%94.png"],["\u971c\u53f6","http://prts.wiki/images/2/29/%E5%A4%B4%E5%83%8F_%E9%9C%9C%E5%8F%B6.png"],["\u7f20\u4e38","http://prts.wiki/images/1/13/%E5%A4%B4%E5%83%8F_%E7%BC%A0%E4%B8%B8.png"],["\u675c\u5bbe","http://prts.wiki/images/a/a1/%E5%A4%B4%E5%83%8F_%E6%9D%9C%E5%AE%BE.png"],["\u7ea2\u8c46","http://prts.wiki/images/b/bb/%E5%A4%B4%E5%83%8F_%E7%BA%A2%E8%B1%86.png"],["\u6e05\u9053\u592b","http://prts.wiki/images/6/63/%E5%A4%B4%E5%83%8F_%E6%B8%85%E9%81%93%E5%A4%AB.png"],["\u8baf\u4f7f","http://prts.wiki/images/2/27/%E5%A4%B4%E5%83%8F_%E8%AE%AF%E4%BD%BF.png"],["\u767d\u96ea","http://prts.wiki/images/b/b4/%E5%A4%B4%E5%83%8F_%E7%99%BD%E9%9B%AA.png"],["\u6d41\u661f","http://prts.wiki/images/1/14/%E5%A4%B4%E5%83%8F_%E6%B5%81%E6%98%9F.png"],["\u6770\u897f\u5361","http://prts.wiki/images/6/63/%E5%A4%B4%E5%83%8F_%E6%9D%B0%E8%A5%BF%E5%8D%A1.png"],["\u8fdc\u5c71","http://prts.wiki/images/6/63/%E5%A4%B4%E5%83%8F_%E8%BF%9C%E5%B1%B1.png"],["\u591c\u70df","http://prts.wiki/images/5/55/%E5%A4%B4%E5%83%8F_%E5%A4%9C%E7%83%9F.png"],["\u6893\u5170","http://prts.wiki/images/8/83/%E5%A4%B4%E5%83%8F_%E6%A2%93%E5%85%B0.png"],["\u53f2\u90fd\u534e\u5fb7","http://prts.wiki/images/b/b3/%E5%A4%B4%E5%83%8F_%E5%8F%B2%E9%83%BD%E5%8D%8E%E5%BE%B7.png"],["\u5b89\u8d5b\u5c14","http://prts.wiki/images/9/94/%E5%A4%B4%E5%83%8F_%E5%AE%89%E8%B5%9B%E5%B0%94.png"],["\u8299\u84c9","http://prts.wiki/images/d/d3/%E5%A4%B4%E5%83%8F_%E8%8A%99%E8%93%89.png"],["\u708e\u7194","http://prts.wiki/images/f/fb/%E5%A4%B4%E5%83%8F_%E7%82%8E%E7%86%94.png"],["\u5b89\u5fb7\u5207\u5c14","http://prts.wiki/images/f/f6/%E5%A4%B4%E5%83%8F_%E5%AE%89%E5%BE%B7%E5%88%87%E5%B0%94.png"],["\u514b\u6d1b\u4e1d","http://prts.wiki/images/b/b9/%E5%A4%B4%E5%83%8F_%E5%85%8B%E6%B4%9B%E4%B8%9D.png"],["\u7c73\u683c\u9c81","http://prts.wiki/images/3/32/%E5%A4%B4%E5%83%8F_%E7%B1%B3%E6%A0%BC%E9%B2%81.png"],["\u5361\u7f07","http://prts.wiki/images/8/87/%E5%A4%B4%E5%83%8F_%E5%8D%A1%E7%BC%87.png"],["\u73ab\u5170\u838e","http://prts.wiki/images/4/4b/%E5%A4%B4%E5%83%8F_%E7%8E%AB%E5%85%B0%E8%8E%8E.png"],["\u7fce\u7fbd","http://prts.wiki/images/1/1f/%E5%A4%B4%E5%83%8F_%E7%BF%8E%E7%BE%BD.png"],["\u9999\u8349","http://prts.wiki/images/c/c8/%E5%A4%B4%E5%83%8F_%E9%A6%99%E8%8D%89.png"],["\u82ac","http://prts.wiki/images/4/41/%E5%A4%B4%E5%83%8F_%E8%8A%AC.png"],["12F","http://prts.wiki/images/b/b7/%E5%A4%B4%E5%83%8F_12F.png"],["\u675c\u6797","http://prts.wiki/images/2/24/%E5%A4%B4%E5%83%8F_%E6%9D%9C%E6%9E%97.png"],["\u5de1\u6797\u8005","http://prts.wiki/images/9/93/%E5%A4%B4%E5%83%8F_%E5%B7%A1%E6%9E%97%E8%80%85.png"],["\u9ed1\u89d2","http://prts.wiki/images/f/f1/%E5%A4%B4%E5%83%8F_%E9%BB%91%E8%A7%92.png"],["\u591c\u5200","http://prts.wiki/images/b/b2/%E5%A4%B4%E5%83%8F_%E5%A4%9C%E5%88%80.png"],["Castle-3","http://prts.wiki/images/8/82/%E5%A4%B4%E5%83%8F_Castle-3.png"]]),At="localhost:3050";function _t(t){return Object(n.jsx)("div",{className:"lobby-avatar-container",style:{borderColor:t.is_player?"#389e0d":void 0},children:Object(n.jsx)("img",{className:"lobby-avatar",src:t.avatar})})}function bt(t){return Object(n.jsxs)("div",{className:"room",children:[t.players.map((function(e){return Object(n.jsx)(_t,{is_player:e==t.playerID,avatar:jt(e)})})),Object(n.jsx)("button",{className:"room-btn",style:{display:void 0==t.operation||t.locked?"none":void 0},onClick:t.operation&&t.operation.effect,children:t.operation&&t.operation.name})]})}function jt(t){var e=ht.length;return ht[Math.floor(function(t){var e=g.a.sum(t.split("").map((function(e,i){return t.charCodeAt(i)}))),i=1e4*Math.sin(e++);return i-Math.floor(i)}(t)*e)][1]}function kt(t){var e="http://".concat(At,"/rooms");fetch(e).then((function(t){return t.json()})).then((function(e){return t((function(t){return Object(o.a)(Object(o.a)({},t),{},{rooms:e.rooms})}))}))}function Ft(t,e){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function wt(t){t((function(t){return Object(o.a)(Object(o.a)({},t),{},{locked:!0})})),setTimeout((function(){return kt(t)}),500)}function vt(t,e,i,n){return void 0!=t.players.find((function(t){return t.player_id==e}))?{name:"\u9000\u51fa",effect:function(){!function(t,e){Ft("http://".concat(At,"/leave"),{player_id:t,room_id:e})}(e,t.room_id),wt(n)}}:i?void 0:{name:"\u52a0\u5165",effect:function(){!function(t,e){Ft("http://".concat(At,"/enter"),{player_id:t,room_id:e,max_players:4})}(e,t.room_id),wt(n)}}}function yt(t){var e=Object(a.useState)({player_id:Object(Bt.v4)(),rooms:[],locked:!1}),i=Object(p.a)(e,2),s=i[0],c=i[1];Object(a.useEffect)((function(){kt(c);var t=setInterval((function(){kt(c),console.log("Fetching room from server...")}),2500),e=function(){var e;e=s.player_id,Ft("http://".concat(At,"/leavelobby"),{player_id:e}),clearInterval(t),console.log("Exit lobby ".concat(s.player_id))};return window.addEventListener("beforeunload",e),function(){e(),window.removeEventListener("beforeunload",e)}}),[]),Object(a.useEffect)((function(){var e,i,n=s.rooms.find((function(t){return void 0!=t.players.find((function(t){return t.player_id==s.player_id}))}));if(n&&4==n.players.length){var a=n.players.map((function(t){return t.player_id})).indexOf(s.player_id)+"";e=s.player_id,i=n.room_id,Ft("http://".concat(At,"/entergame"),{player_id:e,room_id:i}),t.actions.enter_game(n.room_id,a)}}),[s.rooms]),Object(a.useEffect)((function(){s.locked&&setTimeout((function(){return c((function(t){return Object(o.a)(Object(o.a)({},t),{},{locked:!1})}))}),2e3)}),[s.locked]);var r=s.rooms.flatMap((function(t){return t.players.map((function(t){return t.player_id}))})).includes(s.player_id);return Object(n.jsxs)("div",{className:"board",children:[Object(n.jsxs)("div",{className:"lobby-player-panel",children:[Object(n.jsx)(_t,{avatar:jt(s.player_id),is_player:!0}),Object(n.jsx)("button",{className:"room-btn",style:{display:r||s.locked?"none":void 0},onClick:function(){return c(Object(o.a)(Object(o.a)({},s),{},{player_id:Object(Bt.v4)()}))},children:"\u6362\u4e2a\u5f62\u8c61"})]}),Object(n.jsx)("div",{className:"rooms",children:s.rooms.map((function(t){return Object(n.jsx)(bt,{players:t.players.map((function(t){return t.player_id})),playerID:s.player_id,operation:vt(t,s.player_id,r,c),locked:s.locked})}))}),Object(n.jsx)("div",{}),Object(n.jsxs)("div",{style:{display:r?"none":void 0},className:"lobby-controller",children:[Object(n.jsx)("button",{className:"lobby-btn",onClick:function(){return t.actions.changer("Title")},children:"\u8fd4\u56de"}),Object(n.jsx)("button",{className:"lobby-btn",onClick:function(){var t;t=s.player_id,Ft("http://".concat(At,"/create"),{player_id:t}),wt(c)},children:"\u521b\u5efa\u623f\u95f4"}),Object(n.jsx)("button",{className:"lobby-btn",onClick:function(){return t.actions.direct_enter()},children:"\u91cd\u8fdb"})]})]})}var xt=Object(E.a)({game:P,board:mt,debug:!1,numPlayers:1}),Ot=function(t){return Object(n.jsx)(gt,{title:"\u96c0\u9b42: \u7206\u70b8\u4e00\u59ec",titleImg:"https://s3.ax1x.com/2020/12/30/rqw8KA.png",operations:[{name:"\u5355\u4eba\u7ec3\u4e60",effect:function(){return t.actions.changer("SingleClient")}},{name:"\u591a\u4eba\u8fd0\u52a8",effect:function(){return t.actions.changer("CSPRLobby")}},{name:"\u73a9\u6cd5\u6559\u5b66"}]})},Ct=function(t){return Object(n.jsx)(yt,Object(o.a)({},t))},Dt=function(){var t=Object(a.useState)({scene:"Title",in_game:!1}),e=Object(p.a)(t,2),i=e[0],s=e[1],c={changer:function(t){return s(Object(o.a)(Object(o.a)({},i),{},{scene:t}))},enter_game:function(t,e){return s(Object(o.a)(Object(o.a)({},i),{},{game_instance:{matchID:t,playerID:e}}))},finish_game:function(){return s(Object(o.a)(Object(o.a)({},i),{},{game_instance:void 0}))},direct_enter:function(){var t=prompt("\u8f93\u5165\u5bf9\u5c40\u4ee3\u7801:"),e=t.slice(-1),n=t.slice(0,-1);s(Object(o.a)(Object(o.a)({},i),{},{game_instance:{matchID:n,playerID:e}}))}},r={CSPRLobby:Ct,Title:Ot,SingleClient:xt}[i.scene]||Ot;if(void 0!=i.game_instance){var u=Object(E.a)({game:P,board:mt,debug:!1,multiplayer:Object(l.b)({server:"localhost:8000"}),numPlayers:4});r=function(){return Object(n.jsx)(u,{matchID:i.game_instance.matchID,playerID:i.game_instance.playerID})}}return Object(n.jsx)(r,Object(o.a)({},{S:i,actions:c}))},Nt=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,110)).then((function(e){var i=e.getCLS,n=e.getFID,a=e.getFCP,s=e.getLCP,c=e.getTTFB;i(t),n(t),a(t),s(t),c(t)}))};r.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(Dt,{})}),document.getElementById("root")),Nt()},36:function(t,e,i){},72:function(t,e,i){},74:function(t,e,i){},77:function(t,e,i){}},[[108,1,2]]]);
//# sourceMappingURL=main.71e9b972.chunk.js.map